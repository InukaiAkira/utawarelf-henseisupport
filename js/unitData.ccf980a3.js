(function(){"use strict";var e={6883:function(e,t,l){var i=l(9963),n=l(6252),o=l(3577);const s=e=>((0,n.dD)("data-v-54863fc9"),e=e(),(0,n.Cn)(),e),r={class:"filter",open:""},a=(0,n.Uk)("絞り込み"),u={class:"grid"},c=s((()=>(0,n._)("div",{class:"label"},"配置",-1))),d=["value"],f={class:"grid type"},w=s((()=>(0,n._)("div",{class:"label"},"属性",-1))),v=["value"],g={class:"grid speed"},h=s((()=>(0,n._)("div",{class:"label"},"速度",-1))),_=["value"],p={class:"grid"},m=s((()=>(0,n._)("div",{class:"label"},"連撃初段",-1))),y=["value"],b={class:"grid"},k=s((()=>(0,n._)("div",{class:"label"},"連撃弐段",-1))),C=["value"],S={class:"grid"},H=s((()=>(0,n._)("div",{class:"label"},"連撃参段",-1))),z=["value"],x={class:"grid show"},F={class:"label"},O=(0,n.Uk)("表示設定"),U=["onUpdate:modelValue"],j={class:"sort-area"},D=["onClick"],L=["onClick"],E={class:"unitData",ref:"unitData"},P=["onClick"],Y={key:0},V=["name","value","onBlur"],$={key:1},K=["onClick"],M=s((()=>(0,n._)("div",{style:{flex:"auto"}},[(0,n._)("div",null,"戦闘開始時攻撃力・連撃時のダメージ計算は"),(0,n._)("div",null,"限定条件での実験的な計算です。"),(0,n._)("div",null,"・キャラ単体で出撃"),(0,n._)("div",null,"・戦闘開始と同時に連撃を発動(気力消費の仕様は無視)"),(0,n._)("br"),(0,n._)("div",null,"キャラの攻撃力はクリックで"),(0,n._)("div",null,"一時的に編集できます。")],-1)));function N(e,t,l,s,N,R){const T=(0,n.up)("draggable"),q=(0,n.up)("modal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("details",r,[(0,n._)("summary",null,[a,(0,n._)("button",{onClick:t[0]||(t[0]=(...e)=>s.filterReset&&s.filterReset(...e))},"リセット")]),(0,n._)("div",u,[c,((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(["近接","遠隔","遠近両用"],(e=>(0,n._)("label",null,[(0,n.wy)((0,n._)("input",{type:"checkbox",name:"配置","onUpdate:modelValue":t[1]||(t[1]=e=>s.filter.配置=e),value:e},null,8,d),[[i.e8,s.filter.配置]]),(0,n.Uk)((0,o.zw)(e),1)]))),64))]),(0,n._)("div",f,[w,((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(["火","水","風","土","闇","光","無"],(e=>(0,n._)("label",null,[(0,n.wy)((0,n._)("input",{type:"checkbox",name:"属性","onUpdate:modelValue":t[2]||(t[2]=e=>s.filter.属性=e),value:e},null,8,v),[[i.e8,s.filter.属性]]),(0,n.Uk)((0,o.zw)(e),1)]))),64))]),(0,n._)("div",g,[h,((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(["超早","早","並","遅","超遅"],(e=>(0,n._)("label",null,[(0,n.wy)((0,n._)("input",{type:"checkbox",name:"速度","onUpdate:modelValue":t[3]||(t[3]=e=>s.filter.速度=e),value:e},null,8,_),[[i.e8,s.filter.速度]]),(0,n.Uk)((0,o.zw)(e),1)]))),64))]),(0,n._)("div",p,[m,((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(["","0","1+"],(e=>(0,n._)("label",null,[(0,n.wy)((0,n._)("input",{type:"radio",name:"連撃初段","onUpdate:modelValue":t[4]||(t[4]=e=>s.filter.連撃初段=e),value:e},null,8,y),[[i.G2,s.filter.連撃初段]]),(0,n.Uk)((0,o.zw)(e||"all"),1)]))),64))]),(0,n._)("div",b,[k,((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(["","0","1+"],(e=>(0,n._)("label",null,[(0,n.wy)((0,n._)("input",{type:"radio",name:"連撃弐段","onUpdate:modelValue":t[5]||(t[5]=e=>s.filter.連撃弐段=e),value:e},null,8,C),[[i.G2,s.filter.連撃弐段]]),(0,n.Uk)((0,o.zw)(e||"all"),1)]))),64))]),(0,n._)("div",S,[H,((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(["","0","1+"],(e=>(0,n._)("label",null,[(0,n.wy)((0,n._)("input",{type:"radio",name:"連撃参段","onUpdate:modelValue":t[6]||(t[6]=e=>s.filter.連撃参段=e),value:e},null,8,z),[[i.G2,s.filter.連撃参段]]),(0,n.Uk)((0,o.zw)(e||"all"),1)]))),64))]),(0,n._)("div",x,[(0,n._)("div",F,[O,(0,n._)("a",{class:"sm",href:"#notice",onClick:t[7]||(t[7]=(0,i.iM)((e=>s.state.noticeShow=!0),["prevent"]))},"ダメージの計算について")]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.showColumns,(e=>((0,n.wg)(),(0,n.iD)("label",null,[(0,n.wy)((0,n._)("input",{type:"checkbox","onUpdate:modelValue":t=>s.filter.show[e]=t,value:!0},null,8,U),[[i.e8,s.filter.show[e]]]),(0,n.Uk)((0,o.zw)(e),1)])))),256))])]),(0,n._)("div",j,[(0,n._)("label",{onClick:t[8]||(t[8]=(...e)=>s.hilightHeader&&s.hilightHeader(...e))},"並び替え"),(0,n.Wm)(T,{class:"sort",modelValue:s.state.sortConfig,"onUpdate:modelValue":t[9]||(t[9]=e=>s.state.sortConfig=e),group:"sortConfig","ghost-class":"ghost","item-key":"name"},{item:(0,n.w5)((({element:e,index:t})=>[((0,n.wg)(),(0,n.iD)("div",{key:e.name},[(0,n._)("div",{class:(0,o.C_)(e.asc?"asc":"desc"),onClick:t=>e.asc=!e.asc},[(0,n._)("button",{class:"x",onClick:(0,i.iM)((e=>s.state.sortConfig.splice(t,1)),["stop"])},null,8,L),(0,n._)("div",null,(0,o.zw)(e.name),1)],10,D)]))])),_:1},8,["modelValue"])]),(0,n._)("div",E,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.columns,(e=>((0,n.wg)(),(0,n.iD)("div",{class:"header",onClick:t=>s.addSort(e)},[(0,n.wy)((0,n._)("div",{class:"c"},(0,o.zw)(e),513),[[i.F8,s.isShow(e)]])],8,P)))),256)),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(s.sortedList,(e=>((0,n.wg)(),(0,n.iD)(n.HY,{key:e.no},[(0,n._)("div",null,[(0,n._)("div",(0,n.dG)({class:["img",e.image]},s.dd.draggableUnit(e.no)),null,16),(0,n._)("div",null,(0,o.zw)(e.名前),1)]),(0,n._)("div",null,[(0,n.wy)((0,n._)("div",{class:"c"},(0,o.zw)(e.配置),513),[[i.F8,s.filter.show.配置]])]),(0,n._)("div",null,[(0,n.wy)((0,n._)("div",{class:"c"},(0,o.zw)(e.属性),513),[[i.F8,s.filter.show.属性]])]),(0,n._)("div",null,[(0,n.wy)((0,n._)("div",{class:"c"},(0,o.zw)(e.速度),513),[[i.F8,s.filter.show.速度]])]),(0,n._)("div",null,[(0,n.wy)((0,n._)("div",{class:"c"},(0,o.zw)(e.Hit),513),[[i.F8,s.filter.show.Hit]])]),(0,n._)("div",null,[(0,n.wy)((0,n._)("div",{class:"r"},(0,o.zw)(e.HP?.toLocaleString()),513),[[i.F8,s.filter.show.HP]])]),s.state.editNo[e.no]?((0,n.wg)(),(0,n.iD)("div",Y,[(0,n._)("input",{class:"edit",type:"number",step:"1",min:"0",name:e.no,value:e.攻撃,onBlur:t=>s.updateStatus(e.no,t.target.value)},null,40,V)])):((0,n.wg)(),(0,n.iD)("div",$,[(0,n.wy)((0,n._)("div",{class:"r pointer",onClick:t=>s.clickStatus(e.no)},(0,o.zw)(e.攻撃?.toLocaleString()),9,K),[[i.F8,s.filter.show.攻撃]])])),(0,n._)("div",null,[(0,n.wy)((0,n._)("div",{class:"r"},(0,o.zw)(e.回復?.toLocaleString()),513),[[i.F8,s.filter.show.回復]])]),(0,n._)("div",null,[(0,n.wy)((0,n._)("div",{class:"c"},(0,o.zw)(e.初段C),513),[[i.F8,s.filter.show.連撃コスト]])]),(0,n._)("div",null,[(0,n.wy)((0,n._)("div",{class:"r"},(0,o.zw)(e.初段倍率&&e.初段倍率.toFixed(1).toLocaleString()+"%"),513),[[i.F8,s.filter.show.連撃倍率]])]),(0,n._)("div",null,[(0,n.wy)((0,n._)("div",{class:"c"},(0,o.zw)(e.弐段C),513),[[i.F8,s.filter.show.連撃コスト]])]),(0,n._)("div",null,[(0,n.wy)((0,n._)("div",{class:"r"},(0,o.zw)(e.弐段倍率&&e.弐段倍率.toFixed(1).toLocaleString()+"%"),513),[[i.F8,s.filter.show.連撃倍率]])]),(0,n._)("div",null,[(0,n.wy)((0,n._)("div",{class:"c"},(0,o.zw)(e.参段C),513),[[i.F8,s.filter.show.連撃コスト]])]),(0,n._)("div",null,[(0,n.wy)((0,n._)("div",{class:"r"},(0,o.zw)(e.参段倍率&&e.参段倍率.toFixed(1).toLocaleString()+"%"),513),[[i.F8,s.filter.show.連撃倍率]])]),(0,n._)("div",null,[(0,n.wy)((0,n._)("div",{class:"r"},(0,o.zw)(e.戦闘開始時?.toLocaleString()),513),[[i.F8,s.filter.show.戦闘開始時]])]),(0,n._)("div",null,[(0,n.wy)((0,n._)("div",{class:"r"},(0,o.zw)(e.初段ダメージ?.toLocaleString()),513),[[i.F8,s.filter.show.ダメージ]])]),(0,n._)("div",null,[(0,n.wy)((0,n._)("div",{class:"r"},(0,o.zw)(e.弐段ダメージ?.toLocaleString()),513),[[i.F8,s.filter.show.ダメージ]])]),(0,n._)("div",null,[(0,n.wy)((0,n._)("div",{class:"r"},(0,o.zw)(e.参段ダメージ?.toLocaleString()),513),[[i.F8,s.filter.show.ダメージ]])])],64)))),128))],512),(0,n.Wm)(q,{id:"notice",show:s.state.noticeShow},{default:(0,n.w5)((()=>[M,(0,n._)("button",{onClick:t[10]||(t[10]=e=>s.state.noticeShow=!1)},"閉じる")])),_:1},8,["show"])],64)}var R=l(2262),T=l(9980),q=l.n(T),G=l(7837),J=l(7349),Z=l(9897),B={components:{draggable:q(),modal:G.Z},setup(){const e=(0,R.qj)({unitList:[]}),t=["名前","配置","属性","速度","Hit","HP","攻撃","回復","初段C","初段倍率","弐段C","弐段倍率","参段C","参段倍率","戦闘開始時","初段ダメージ","弐段ダメージ","参段ダメージ"],l=["配置","属性","速度","Hit","HP","攻撃","回復","連撃コスト","連撃倍率","戦闘開始時","ダメージ"],i=(0,R.qj)({"配置":[],"属性":[],"速度":[],"連撃初段":"","連撃弐段":"","連撃参段":"",show:Object.fromEntries(l.map((e=>[e,!0])))}),o=(0,R.qj)({list:[],sortConfig:[],editNo:{},noticeShow:!1}),s=(0,n.Fl)((()=>{let e=[...o.list];if(i.配置.length){const t=i.配置;e=e.filter((e=>t.includes(e.配置)))}if(i.属性.length){const t=new RegExp(i.属性.join("|"));e=e.filter((e=>t.test(e.属性)))}if(i.速度.length){const t=new RegExp(`^${i.速度.join("|")}$`);e=e.filter((e=>t.test(e.速度)))}for(const t of["連撃初段","連撃弐段","連撃参段"])if(i[t]){const l=t.substring(2)+"C";e="0"===i[t]?e.filter((e=>0===e[l])):e.filter((e=>0!==e[l]))}return e})),r=(0,n.Fl)((()=>0===o.sortConfig.length?s.value:s.value.sort(((e,t)=>{const l=[...o.sortConfig];return W(e,t,l)}))));(0,n.bv)((()=>{J.load().then((t=>{Object.assign(e,t),o.list=e.unitList.filter((e=>!/\./.test(e.no))).map((e=>({no:e.no,image:e.image,"名前":e.name,"配置":e.position,"属性":e.type,"速度":e.speed,Hit:e.hit,HP:e.hp,"攻撃":e.power,"回復":e.heal,"初段C":e.rengeki_cost1,"初段倍率":e.rengeki_rate1,"弐段C":e.rengeki_cost2,"弐段倍率":e.rengeki_rate2,"参段C":e.rengeki_cost3,"参段倍率":e.rengeki_rate3,"戦闘開始時":null,"初段ダメージ":null,"弐段ダメージ":null,"参段ダメージ":null}))),(0,n.Y3)((()=>{I(o,e)}))}))}));const a=(0,R.iH)(null);function u(){a.value.classList.add("onLight"),setTimeout((()=>{a.value.classList.remove("onLight")}),100)}function c(e){o.sortConfig.find((t=>t.name===e))||o.sortConfig.push({name:e,asc:!1})}function d(){Object.assign(i,{"配置":[],"属性":[],"速度":[],"連撃初段":"","連撃弐段":"","連撃参段":"",show:Object.fromEntries(l.map((e=>[e,!0])))})}function f(e){switch(e){case"名前":return!0;case"配置":return i.show.配置;case"属性":return i.show.属性;case"速度":return i.show.速度;case"Hit":return i.show.Hit;case"HP":return i.show.HP;case"攻撃":return i.show.攻撃;case"回復":return i.show.回復;case"初段C":case"弐段C":case"参段C":return i.show.連撃コスト;case"初段倍率":case"弐段倍率":case"参段倍率":return i.show.連撃倍率;case"戦闘開始時":return i.show.戦闘開始時;case"初段ダメージ":case"弐段ダメージ":case"参段ダメージ":return i.show.ダメージ}}function w(e){o.editNo[e]=!0,(0,n.Y3)((()=>document.querySelector(`input[name="${e}"]`).focus()))}function v(t,l){const i=o.list.find((e=>e.no===t));i.攻撃=Number(l);const n=e.unitTokuseiList.filter((e=>e.unit_no===t));A(i,n),o.editNo[t]=!1}return{columns:t,showColumns:l,filter:i,state:o,sortedList:r,unitData:a,hilightHeader:u,addSort:c,filterReset:d,isShow:f,clickStatus:w,updateStatus:v,dd:(0,Z.Z)()}}};function W(e,t,l){const{name:i,asc:n}=l.shift();return e[i]===t[i]?0===l.length?0:W(e,t,l):e[i]<t[i]?-1*(n?1:-1):1*(n?1:-1)}function I(e,t){let l=[...t.unitTokuseiList];l=l.filter((e=>!/\./.test(e.unit_no))),e.list.forEach((e=>{const t=[];while(l.length){if(l[0].unit_no!==e.no)break;t.push(l.shift())}A(e,t)}))}function A(e,t){const l=e.攻撃?"攻撃力":"回復力",i=JSON.parse(JSON.stringify(t));i.forEach(((e,t)=>{e.id=t}));const n=e.攻撃?"攻撃":"回復";let o=Q(e,"戦闘開始時",i,[]);e.戦闘開始時=te(l,e[n],o),"キウル［弓護衆］"!==e.名前&&"カルラ［妖酊酔宴］"!==e.名前||(e.初段倍率&&(e.初段ダメージ="計算予定なし"),e.弐段倍率&&(e.弐段ダメージ="計算予定なし"),e.参段倍率&&(e.参段ダメージ="計算予定なし")),e.回復||(e.初段倍率&&(e.初段ダメージ=Math.floor(te(l,e[n],o)*(e.初段倍率/100))),o=Q(e,"連撃初段",i,o,!!e.初段倍率),e.弐段倍率&&(e.弐段ダメージ=Math.floor(te(l,e[n],o)*(e.弐段倍率/100))),o=Q(e,"連撃弐段",i,o,!!e.弐段倍率),e.参段倍率&&(e.参段ダメージ=Math.floor(te(l,e[n],o)*(e.参段倍率/100))))}function Q(e,t,l,i,n=!1){let o;return"戦闘開始時"===t?(o=l.filter((t=>"戦闘開始時"===t.trigger1&&X(e,t))),JSON.parse(JSON.stringify(o))):/連撃.段/.test(t)?(n&&(e.攻撃||"キウル［弓護衆］"===e.名前||"カルラ［妖酊酔宴］"===e.名前)&&(i=Q(e,"攻撃時",l,i)),o=l.filter((l=>[l.trigger1,l.trigger2].includes(t)&&X(e,l))),ee(i,o),i):"攻撃時"===t?(i=i.filter((e=>{if(/攻撃力(UP|ダウン)/.test(e.特性)&&/^(\d+)回$/.test(e.持続)){const t=+RegExp.$1-1;if(0===t)return!1;e.持続=`${t}回`}return!0})),o=l.filter((l=>[l.trigger1,l.trigger2].includes(t)&&X(e,l))),ee(i,o),i):i}function X(e,t){return!!t.対象.includes("自身")||!!/味方全体/.test(t.対象.join(","))}function ee(e,t){t.forEach((t=>{if("累積"!==t.累積)if("再装"!==t.累積)e.find((e=>e.id===t.id))||e.push(t);else{const l=e.find((e=>e.id===t.id));l?Object.assign(l,t):e.push(t)}else e.push(t)}))}function te(e,t,l){const i={rate:0,fix:0},n={rate:0,fix:0};l.filter((t=>t.特性===`${e}UP`)).forEach((e=>{/(\d+)％/.test(e.効果量)?i.rate+=+RegExp.$1:i.fix+=+e.効果量})),l.filter((t=>t.特性===`${e}ダウン`)).forEach((e=>{/(\d+)％/.test(e.効果量)?n.rate+=+RegExp.$1:n.fix+=+e.効果量}));const o=t*(100+i.rate-n.rate)/100+i.fix-i.fix;return Math.floor(o)}var le=l(3744);const ie=(0,le.Z)(B,[["render",N],["__scopeId","data-v-54863fc9"]]);var ne=ie;(0,i.ri)(ne).mount("#main")}},t={};function l(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,l),o.exports}l.m=e,function(){var e=[];l.O=function(t,i,n,o){if(!i){var s=1/0;for(c=0;c<e.length;c++){i=e[c][0],n=e[c][1],o=e[c][2];for(var r=!0,a=0;a<i.length;a++)(!1&o||s>=o)&&Object.keys(l.O).every((function(e){return l.O[e](i[a])}))?i.splice(a--,1):(r=!1,o<s&&(s=o));if(r){e.splice(c--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[i,n,o]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var i in t)l.o(t,i)&&!l.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){l.j=194}(),function(){var e={194:0};l.O.j=function(t){return 0===e[t]};var t=function(t,i){var n,o,s=i[0],r=i[1],a=i[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(n in r)l.o(r,n)&&(l.m[n]=r[n]);if(a)var c=a(l)}for(t&&t(i);u<s.length;u++)o=s[u],l.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return l.O(c)},i=self["webpackChunkfront"]=self["webpackChunkfront"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=l.O(void 0,[998,64],(function(){return l(6883)}));i=l.O(i)})();